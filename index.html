<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="title" content="小石桥绩点">
    <meta name="author" content="欧阳荣鑫">
    <meta name="keywords" content="绩点,GPA,中国政法大学,教务处">
    <meta name="description" content="中国政法大学绩点计算工具,为移动而生.">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#e74c3c">
    <link href="https://cdn.icupl.cn/css/main.css" rel="stylesheet">
    <title>小石桥绩点</title>
</head>

<body>
    <script src="https://lib.sinaapp.com/js/jquery/1.8.3/jquery.min.js"></script>
    <div class="cards">
        <div class="card">
            <center>
                <img id="headicon" alt="icon" src="https://cdn.icupl.cn/pic/no.png" style=" width:40%;max-width:200px;padding:60px 15px 15px;margin-bottom:30px; display: none;">
                <script lang="javascript">
                    $('#headicon').fadeIn();
                </script>

            </center>
            <div class="card-text-index" style="display: none;">
                <form action="./get.php" method="post" name="cha_form">
                    <center></center><span style="font-size: large">
                     <center>

            <font class="ccc" id="cMain" style="font-size:20px; background-color:#e6e6e6; border-radius:40px; color:#fff; line-height:1em; padding:16px 8px 16px;margin:5px;">主修</font>
            <font class="ccc"  id="cThis" style="font-size:20px; background-color:#e74c3c; border-radius:40px; color:#fff; line-height:1em; padding:16px 8px 16px;margin:2px;">本期</font>
            <font class="ccc"  id="cAll" style="font-size:20px; background-color:#e6e6e6; border-radius:40px; color:#fff; line-height:1em; padding:16px 8px 16px;margin:5px;">全部</font>
        </center>
                    <input id="cn" type="hidden" name="cn" size="1" maxlength="1" value="0">
                    </span>
                    <p>
                        <span style="font-size: 20px">
            <center><input type="text" name="zjh" size="10" value="学号" maxlength="12" style="width:90%;height:40px;background:#e6e6e6;border:0px;border-color:#e74c3c;margin:25px 0px 0px;padding:0px ;text-align:center;font-size:20px;color:#999;"></center>
                        </span>
                    </p>
                    <p>
                        <span style="font-size: 20px">
            <center><input type="password" name="mm" size="10" value="密码" style="width:90%;height:40px;background:#e6e6e6;border:0px;border-color:#e74c3c;margin:0px 0px 0px;padding:0px ;text-align:center;font-size:20px;color:#999;"></center>
                        <br/>
                        <center><input class="sub-btn" type="submit" style="-webkit-appearance:none;width:90%; border:0; border-radius:0px;background-color:#e74c3c;line-height:50px;color:#fff;font-size:20px;padding:0px;margin:0px;" value="查询成绩"></center>
                      </span>
                    </p>
                </form>
                <div class="card-note">
                <center><p>Docker测试中，如有问题请<a href="mailto:oyrx@vip.qq.com">联系我</a>。</p></center>
                </div>
            </div>
        </div></script>
        <script lang="javascript">
            $('.card-text-index').delay(600).fadeIn();
        </script>
        <!--div class="card">
            <div class="card-img">
                <script language="javascript">
                var picN = parseInt(Math.random() * 8);
                document.write("<img alt='中国政法大学' src='https://cdn.icupl.cn/pic/" + picN + ".JPG' class='card-img-inside'>");
                </script >
            </div>
        </div-->
    </div>
    <script language="javascript">

        function getCookie(c_name) //根据分隔符每个变量的值
        {
            if (document.cookie.length > 0) {
                c_start = document.cookie.indexOf(c_name + "=");
                if (c_start != -1) {
                    c_start = c_start + c_name.length + 1;
                    c_end = document.cookie.indexOf("^", c_start);
                    if (c_end == -1)
                        c_end = document.cookie.length;
                    return unescape(document.cookie.substring(c_start, c_end));
                }
            }
            return "";
        }


        function setCookie(c_name, n_value, p_name, p_value, expiredays) //设置cookie
        {
            var exdate = new Date();
            exdate.setDate(exdate.getDate() + expiredays);
            document.cookie = c_name + "=" + escape(n_value) + "^" + p_name + "=" + escape(p_value) + ((expiredays ===
                null) ? "" : "^;expires=" + exdate.toGMTString());
            //console.log(document.cookie)
        }

        function checkCookie() //检测cookie是否存在，如果存在则直接读取，否则创建新的cookie
        {
            //console.log(document.cookie);
            var zjh = getCookie('zjh');
            var mm = getCookie('mm');
            if (zjh !== null && zjh !== "" && mm !== null && mm !== "") {
                document.getElementsByName("zjh")[0].value = zjh;
                document.getElementsByName("mm")[0].value = mm;
                $('.card-note').append("<p>已自动填写帐号密码 <a href = 'help.html'>[?]</a></p>");
                //setTimeout(document.getElementsByName("cha_form")[0].submit(), 20000);


            } else {

                //console.log(zjh + " " + mm);

            }
        }

        function cleanCookie(c_name, p_name) { //使cookie过期
            document.cookie = c_name + "=" + ";" + p_name + "=" + ";expires=Thu, 01-Jan-70 00:00:01 GMT";
        }

        var changeCn = function() {
            $("font#cMain").click(function() {
                $("font#cMain").css("background-color", "#e74c3c");
                $("font#cAll").css("background-color", "#e6e6e6");
                $("font#cThis").css("background-color", "#e6e6e6");
                $("#cn").val(0);
            });
            $("font#cAll").click(function() {
                $("font#cMain").css("background-color", "#e6e6e6");
                $("font#cAll").css("background-color", "#e74c3c");
                $("font#cThis").css("background-color", "#e6e6e6");
                $("#cn").val(1);
            });
            $("font#cThis").click(function() {
                $("font#cMain").css("background-color", "#e6e6e6");
                $("font#cAll").css("background-color", "#e6e6e6");
                $("font#cThis").css("background-color", "#e74c3c");
                $("#cn").val(2);
            });
        }

        var subAlert = function() {
            $("#cn").val(2);
            $('input.sub-btn').click(function() {
                var zjh = getCookie('zjh');
                var mm = getCookie('mm');
                zjh = document.getElementsByName("zjh")[0].value;
                mm = document.getElementsByName("mm")[0].value;
                if (zjh != null && zjh != "" && mm != null && mm != "") {
                    setCookie('zjh', zjh, 'mm', mm, 365);
                };
                $('.card-note').append("<p>由于学校服务器较慢，请耐心等待。</p>");
            });

            $("input[name='zjh']").click(function() {
                if ($("input[name='zjh']").val() === "学号") {
                    document.getElementsByName("zjh")[0].value = "201";
                }
                if ($("input[name='mm']").val() === "") {
                    document.getElementsByName("mm")[0].value = "***";
                }
            });

            $("input[name='mm']").click(function() {
                if ($("input[name='mm']").val() === "***") {
                    document.getElementsByName("mm")[0].value = "";
                };
                if ($("input[name='zjh']").val() === "") {
                    document.getElementsByName("zjh")[0].value = "学号";
                } else if ($("input[name='zjh']").val() === "201") {
                    document.getElementsByName("zjh")[0].value = "学号";
                };
            });
        };
        $(document).ready(navF);
        $(document).ready(checkCookie);
        $(document).ready(subAlert);
        $(document).ready(changeCn);
    </script>
    <script src="https://s13.cnzz.com/z_stat.php?id=1261985373&web_id=1261985373" language="JavaScript">
</body>

</html>
